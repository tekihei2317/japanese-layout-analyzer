---
import "../styles/global.css";

const layoutRows = [
  ["Q", "W", "E", "R", "T", "Y", "U", "I", "O", "P"],
  ["A", "S", "D", "F", "G", "H", "J", "K", "L", "—"],
  ["Z", "X", "C", "V", "B", "N", "M", "—", "—", "—"],
];

const layoutNames = ["QWERTY", "大西配列", "花配列", "月見草配列"];

const loadMatrix = [
  [0.6, 3.8, 6.4, 8.1, 11.7, 9.2, 7.5, 6.1, 3.2, 1.1],
  [12.3, 9.6, 5.4, 2.9, 1.8, 2.4, 5.8, 7.6, 9.1, 0.4],
  [4.2, 3.1, 2.6, 1.4, 0.9, 0.7, 0.3, 0.0, 0.0, 0.0],
];

const metrics = [
  { label: "打鍵効率", value: "44.2%", note: "前回比 +1.3" },
  { label: "SFBs", value: "4.9%", note: "閾値 6%未満" },
  { label: "SFSs", value: "3.6%", note: "安定ゾーン" },
  { label: "Scissors", value: "1.2%", note: "要注意" },
  { label: "Trigram alt", value: "31.0%", note: "改善傾向" },
  { label: "Trigram redirect", value: "8.6%", note: "基準内" },
  { label: "Trigram roll", value: "38.3%", note: "高め" },
  { label: "Trigram 3roll", value: "13.0%", note: "基準内" },
  { label: "In:out roll", value: "1.70", note: "バランス良好" },
  { label: "Hand use", value: "50.9%", note: "左右均等" },
];

const loadClass = (value) => {
  if (value >= 10) return "bg-emerald-500/90 text-slate-900";
  if (value >= 8) return "bg-emerald-400/90 text-slate-900";
  if (value >= 6) return "bg-emerald-300/90 text-slate-900";
  if (value >= 4) return "bg-emerald-200/90 text-slate-800";
  if (value >= 2) return "bg-emerald-100/90 text-slate-800";
  return "bg-slate-100 text-slate-500";
};
---

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Japanese Layout Analyzer</title>
  </head>
  <body class="min-h-screen">
    <div class="relative overflow-hidden">
      <div class="absolute -top-24 right-10 h-64 w-64 rounded-full bg-teal-100 blur-3xl"></div>
      <div class="absolute top-24 -left-20 h-72 w-72 rounded-full bg-orange-100 blur-3xl"></div>
      <main class="relative mx-auto flex w-full max-w-6xl flex-col gap-10 px-6 py-12">
        <header class="flex flex-col gap-4">
          <div class="inline-flex w-fit items-center gap-2 rounded-full border border-slate-200 bg-white/80 px-4 py-1 text-xs uppercase tracking-[0.35em] text-slate-500 shadow-sm">
            Layout Overview
          </div>
          <div class="flex flex-col gap-3">
            <h1 class="text-3xl font-semibold text-slate-900 sm:text-4xl">
              配列指標ダッシュボード
            </h1>
            <p class="max-w-2xl text-sm text-slate-600 sm:text-base">
              各配列のキーボード配置、負担率、主要指標をまとめて確認するモックアップです。
              データは仮値で、静的表示のみを想定しています。
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-3 text-xs text-slate-600">
            <span class="rounded-full bg-white px-3 py-1 shadow-sm">
              配列: 月見草配列（仮）
            </span>
            <span class="rounded-full bg-white px-3 py-1 shadow-sm">
              コーパス: 青空文庫（仮）
            </span>
            <a
              href="/table"
              class="rounded-full bg-slate-900 px-3 py-1 text-white shadow-sm"
            >
              テーブル画面へ
            </a>
          </div>
        </header>

        <section class="grid gap-8">
          {layoutNames.map((name) => (
            <div class="rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-panel backdrop-blur">
              <div class="flex flex-wrap items-center justify-between gap-3">
                <h2 class="text-xl font-semibold text-slate-900">{name}</h2>
                <div class="flex flex-wrap gap-2 text-xs text-slate-600">
                  <span class="rounded-full border border-slate-200 bg-white px-3 py-1">
                    コーパス: 青空文庫（仮）
                  </span>
                  <span class="rounded-full border border-slate-200 bg-white px-3 py-1">
                    更新: 2024-12-23
                  </span>
                </div>
              </div>

              <div class="mt-6 grid gap-6 lg:grid-cols-[1.1fr_1fr]">
                <div>
                  <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-slate-900">配列図</h3>
                    <span class="text-xs text-slate-500">3行 x 10列</span>
                  </div>
                  <div class="mt-4 grid gap-2">
                    {layoutRows.map((row) => (
                      <div class="grid grid-cols-10 gap-2">
                        {row.map((keyLabel) => (
                          <div class="flex h-10 items-center justify-center rounded-xl border border-slate-200 bg-slate-50 text-xs font-semibold text-slate-700 shadow-sm">
                            {keyLabel}
                          </div>
                        ))}
                      </div>
                    ))}
                  </div>
                </div>

                <div>
                  <div class="flex items-center justify-between">
                    <h3 class="text-base font-semibold text-slate-900">負担率</h3>
                    <span class="text-xs text-slate-500">%</span>
                  </div>
                  <p class="mt-2 text-xs text-slate-500">
                    ここに負担率のグラフを配置します。詳細な仕様は後で反映します。
                  </p>
                  <div class="mt-4 flex h-44 items-center justify-center rounded-2xl border border-dashed border-slate-300 bg-slate-50 text-xs text-slate-500">
                    3行 x 10列の負担率グラフ（仮）
                  </div>
                  <div class="mt-4 flex flex-wrap gap-2 text-xs text-slate-600">
                    <span class="rounded-full border border-slate-200 bg-white px-3 py-1">
                      合計: 100%
                    </span>
                    <span class="rounded-full border border-slate-200 bg-white px-3 py-1">
                      左手: 48.9%
                    </span>
                    <span class="rounded-full border border-slate-200 bg-white px-3 py-1">
                      右手: 51.1%
                    </span>
                  </div>
                </div>
              </div>

              <div class="mt-6">
                <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                  <div>
                    <h3 class="text-base font-semibold text-slate-900">指標</h3>
                    <p class="text-xs text-slate-500">
                      シンプルな横並びテーブルで表示します。
                    </p>
                  </div>
                  <div class="flex flex-wrap gap-2 text-xs">
                    <button class="rounded-full border border-slate-200 bg-slate-50 px-4 py-1 font-medium text-slate-600">
                      フィルタ: 全指標
                    </button>
                    <button class="rounded-full border border-slate-200 bg-white px-4 py-1 font-medium text-slate-600">
                      比較: QWERTY
                    </button>
                  </div>
                </div>
                <div class="mt-4 overflow-x-auto rounded-2xl border border-slate-200">
                  <table class="min-w-full text-left text-xs sm:text-sm">
                    <thead class="bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500">
                      <tr>
                        {metrics.map((metric) => (
                          <th class="px-4 py-3 font-medium">{metric.label}</th>
                        ))}
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="bg-white">
                        {metrics.map((metric) => (
                          <td class="px-4 py-3 text-slate-700">{metric.value}</td>
                        ))}
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          ))}
        </section>

        <section class="rounded-2xl border border-dashed border-slate-300 bg-white/70 p-4 text-xs text-slate-500">
          次のステップ: 実データの型を決めたら、配列図や負担率をJSONから生成できるように置き換えます。
        </section>
      </main>
    </div>
  </body>
</html>
