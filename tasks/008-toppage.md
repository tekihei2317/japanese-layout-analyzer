# トップページの繋ぎ込み

exportコマンドに負担率に関するデータを追加して、トップページにデータを表示します。

## タスク一覧

- [x] exportコマンドに負担率を追加する
  - [x] 負担率の計算を実装する
- [x] 負担率を表示する
  - [x] ヒートマップのコンポーネントを作る
- [x] 指標を表示する
- [x] ヒートマップを改善する
  - [x] ロウスタッガードの配列の表示を実装する
  - [x] オーソリニアの配列の表示を実装する
- [ ] 配列図の表示を実装する
  - [ ] 配列図のコンポーネントを作る（長くなるから、見せるのは単打だけかな）
- [ ] 指標の見せ方を改善する
- [x] コーパスの名前を翻訳する

## メモ

ヒートマップの見せ方と、負担率のデータの持ち方について。

ヒートマップは、kouyさんの1万字統計のように、フルキーボードを表示するようにしたいです。

![](https://i.gyazo.com/8e2c1ff2b10840f4ba5ec8806c74d7d1.png)

なので、負担率のデータは、各キーの位置[row, col]のように座標で持つのではなく、キーコード（ブラウザの`KeyboardEvent.code`）で持つことにします。

keymapperの指定方法と同じ感じです。

[houmain/keymapper: A cross-platform context-aware key remapper.](https://github.com/houmain/keymapper?tab=readme-ov-file)

今のところ、使用するキーとして予定しているのはは数字、アルファベットと記号、あとスペースです。

また、ロースタッガードではなくオーソリニアでも表示できるようにします。これはトップページ上部で選択する形です。これらのレイアウトの位置やキー幅などの定義はやっておきます。

---

どういう感じで進めておこうかな。

- [x] 負担率を表示するための、キーボードレイアウトのメタ情報を定義する
- [x] Stroke->KeyCodeに変換する関数を作る→マップを作っておきました
- [x] 配列図の表示方法も少し考えておく
  - オーソリニアで表示する、定義によって列数が変わる、
  - オプションで左右の間隔を指定する、ホームポジションをハイライトできるようにする（タイピングページで使う用、実装は後からでOK）
- [x] exportコマンドで表示するための負担率の型を定義する
