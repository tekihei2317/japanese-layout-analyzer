# CLIツールの作成

コーパスと配列の組み合わせについて、評価指標を計算するためのコマンドを作ります。

最終的には色々な機能を追加して、CLIツールとして配列制作に役立てられるようにしたいです。

## タスク一覧

- [x] 指標の出力形式を決める
  - [x] テキスト形式
  - [x] JSON形式
- [x] 各指標の計算方法を、genkeyやoxeylizerを参考に調べる
  - [x] cminiを調べる
- [x] ローマ字テーブルの変換ロジックを理解する
- [x] かなをストロークに変換する方法を決める
- [x] コーパスのフォーマットを決める。各指標を計算できるようなデータが必要。
- [ ] コマンドの実装
  - [x] layout list
  - [x] layout show
  - [x] analyze <file>
  - [x] stroke デバッグ用
  - [ ] corpus build
  - [ ] analyze <corpus>
  - [ ] corpus ngram
  - [ ] その他
  - [ ] コーパスと配列を指定して、指標を表示するコマンドを作る
  - [ ] Webサイトで使うためのJSON形式のフォーマットでエクスポートするコマンドを作る

## CLIの設計

コマンド名は`jla`（japanese-layout-analyzerの略）とします。

機能一覧

- ひらがなのテキストを読み込み、コーパスに変換する
- コーパスと配列を指定して、各種指標を計算する

### コマンド一覧

- テキストからコーパス生成
- 評価
  - ひらがなのテキストで評価
  - テキストで評価
  - テキスト形式またはJSONでの出力

```text
# コーパスと配列を指定して分析
jla analyze <corpus> <layout> [--format <text|json>]

# テキストファイルと配列を指定して分析
jla analyze <file> <layout> [--format <text|json>]

# 配列の一覧を表示
jla layout list

# 配列の詳細を表示
jla layout show <layout>

# テキストファイルからコーパス生成
jla corpus build <file.txt>

# コーパスの一覧を表示
jla corpus list

# コーパスの詳細を表示
jla corpus show <corpus>

# コーパスのngramを出力←まぁファイル見たら分かるか...
jla corpus ngram <corpus> [--n <2|3>] [--count <number>]

# 指標の上位リストを表示
jla sfbs <corpus> <layout> [--count <number>]
jla sfss <corpus> <layout> [--count <number>]
jla scissors <corpus> <layout> [--count <number>]
```

### コーパスの形式

TODO: ひらがな→ストロークの変換方法と一緒に考える

### 指標の形式

テキスト形式と、JSON形式の2つがあります。JSON形式は、WebUIで使用するために必要です。

#### テキスト形式

#### JSON形式

TODO:

## ひらがなをストロークに変換する方法

## 各指標の計算方法について

[配列分析ツールの指標の計算方法を調べる](../docs/analyze-tools-research.md)

指標の具体的な計算方法については、genkeyとoxeylyzerを確認します。
