# かなをストロークに変換する方法

変換は、テキストファイルに対して行う場合と、コーパスに対して行う場合の2通りがあります。それぞれ、次の特徴があります。

テキストファイルに対する変換:

- (good) ローマ字テーブルを使って変換するので、正確な打鍵が得られる。
- (not good) 時間がかかる。

コーパスに対する変換:

- (good): コーパスのサイズは一定なので、かかる時間が一定になる。
- (not good): 実際の入力と違う区切りになる場合があるので、必ずしも正確に計算できない。

違う区切りになるとは、ローマ字入力の「ん＋母音またはナ行」や、ブリ中トロ配列の「です」「ます」などが途中で区切られることです。

## 処理の概要

ひらがなのテキストファイルを指定した場合は、ローマ字テーブルを利用してストロークに変換します。

## テキストファイル -> ストロークの変換

ローマ字テーブルを使って打鍵をシミュレーションしながら、幅優先探索で最短経路を求めます。コストは打鍵回数です。

実装: [cli/stroke-utils.ts](../cli/stroke-utils.ts)

## コーパス -> ストロークの変換

[コーパスについて](./corpora.md)

コーパスはの形式は、基本的にはモーラ単位の2-gram、3-gramのデータです（予定）。

なので、コーパスを指定した場合は、先にモーラに対するストロークを計算し、それを合成する...みたいな感じになる予定です。

例外処理があって難しいので、追記します。
