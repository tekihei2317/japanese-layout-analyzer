import { describe, expect, test } from "bun:test";
import { collectKeys, findShortestKeystrokes } from "./stroke-utils";
import {
  getRomanTable,
  LayoutId,
  RomanTable,
} from "@japanese-layout-analyzer/core";

describe(collectKeys, () => {
  test("JISキーボードで入力できる記号を集めること", () => {
    const rules: RomanTable = [
      { input: "j", output: "あ" },
      { input: "'", output: "い" },
      { input: "@", output: "う" },
    ];
    expect(collectKeys(rules)).toEqual(["j", "@"]);
  });

  test("バックスラッシュ（）を除外しないこと", () => {
    const rules: RomanTable = [{ input: "\\", output: "き" }];
    expect(collectKeys(rules)).toEqual(["\\"]);
  });
});

type Cases = [string, string][];

const tsukiCases: Cases = [
  ["、", ","],
  ["。", "."],
  ["「", "d@"],
  ["」", "d:"],
  ["゛", "l"],
  ["ー", "d."],
  ["ぁ", "kq"],
  ["あ", "kf"],
  ["ぃ", "ka"],
  ["い", "i"],
  ["ぅ", "kz"],
  ["う", "j"],
  ["ぇ", "dp"],
  ["え", "du"],
  ["ぉ", "d/"],
  ["お", "dj"],
  ["か", "s"],
  ["き", ";"],
  ["く", "h"],
  ["け", "x"],
  ["こ", "w"],
  ["さ", "b"],
  ["し", "e"],
  ["す", "z"],
  ["せ", "kc"],
  ["そ", "q"],
  ["た", "g"],
  ["ち", "@"],
  ["っ", "n"],
  ["つ", "y"],
  ["て", "r"],
  ["と", "f"],
  ["な", "v"],
  ["に", "c"],
  ["ぬ", "dy"],
  ["ね", "d,"],
  ["の", "o"],
  ["は", "a"],
  ["ひ", "kw"],
  ["ふ", "kr"],
  ["へ", "kx"],
  ["ほ", "ke"],
  ["ま", "dh"],
  ["み", "di"],
  ["む", "dn"],
  ["め", "kt"],
  ["も", "dk"],
  ["ゃ", "kb"],
  ["や", "do"],
  ["ゅ", "kv"],
  ["ゆ", "d;"],
  ["ょ", "t"],
  ["よ", "kg"],
  ["ら", "kd"],
  ["り", "p"],
  ["る", "m"],
  ["れ", ":"],
  ["ろ", "dm"],
  ["わ", "dl"],
  ["を", "ks"],
  ["ん", "u"],
];

const hanaCases: Cases = [
  ["、", "."],
  ["。", ","],
  ["「", "d@"],
  ["」", "d:"],
  ["゛", "l"],
  ["゜", "kg"],
  ["ー", "@"],
  ["ぁ", "ka"],
  ["あ", "kc"],
  ["い", "n"],
  ["ぃ", "dp"],
  ["ぅ", "kz"],
  ["う", "i"],
  ["ぇ", "ke"],
  ["え", "_"],
  ["ぉ", "d;"],
  ["お", "d."],
  ["か", "s"],
  ["き", "f"],
  ["く", "u"],
  ["け", "kw"],
  ["こ", "r"],
  ["さ", "z"],
  ["し", "x"],
  ["す", "a"],
  ["せ", "kx"],
  ["そ", "di"],
  ["た", "g"],
  ["ち", "dk"],
  ["っ", "y"],
  ["つ", "m"],
  ["て", "w"],
  ["と", "e"],
  ["な", "c"],
  ["に", "b"],
  ["ぬ", "d/"],
  ["ね", "dn"],
  ["の", "v"],
  ["は", "t"],
  ["ひ", "kq"],
  ["ふ", "dj"],
  ["へ", "kt"],
  ["ほ", "kr"],
  ["ま", "du"],
  ["み", "dm"],
  ["む", "dl"],
  ["め", "/"],
  ["も", "do"],
  ["ゃ", "dy"],
  ["や", "kf"],
  ["ゅ", "kd"],
  ["ゆ", "kb"],
  ["ょ", "q"],
  ["よ", "ks"],
  ["ら", "p"],
  ["り", ":"],
  ["る", "o"],
  ["れ", "j"],
  ["ろ", ";"],
  ["わ", "kv"],
  ["を", "d,"],
  ["ん", "h"],
];

const bunaCases: Cases = [
  ["、", ","],
  ["。", "."],
  ["「", "d@"],
  ["」", "d:"],
  ["ー", "dl"],
  ["ぁ", "k/"],
  ["あ", "kg"],
  ["ぃ", "k."],
  ["い", "l"],
  ["ぅ", "dt"],
  ["う", "m"],
  ["ゔ", "db"],
  ["ぇ", "ki"],
  ["え", "ko"],
  ["ぉ", "k,"],
  ["お", "kl"],
  ["か", "s"],
  ["が", "x"],
  ["き", "p"],
  ["ぎ", "d,"],
  ["く", "h"],
  ["ぐ", "d."],
  ["け", "kd"],
  ["げ", "di"],
  ["こ", "q"],
  ["ご", "kc"],
  ["さ", "ds"],
  ["ざ", "kx"],
  ["し", "i"],
  ["じ", "do"],
  ["す", "v"],
  ["ず", "dn"],
  ["せ", "ks"],
  ["ぜ", "dg"],
  ["そ", "kr"],
  ["ぞ", "dx"],
  ["た", "g"],
  ["だ", "z"],
  ["ち", "km"],
  ["ぢ", "de"],
  ["っ", "u"],
  ["つ", "kj"],
  ["づ", "dq"],
  ["て", "r"],
  ["で", "a"],
  ["と", ";"],
  ["ど", "kf"],
  ["な", "f"],
  ["に", "w"],
  ["ぬ", "dy"],
  ["ね", "kv"],
  ["の", "o"],
  ["は", "e"],
  ["ば", "da"],
  ["ぱ", "du"],
  ["ひ", "dh"],
  ["び", "kh"],
  ["ぴ", "dz"],
  ["ふ", "kz"],
  ["ぶ", "d;"],
  ["ぷ", "dr"],
  ["へ", "kt"],
  ["べ", "kq"],
  ["ぺ", "ku"],
  ["ほ", "ke"],
  ["ぼ", "kw"],
  ["ぽ", "d/"],
  ["ま", "c"],
  ["み", "kn"],
  ["む", "dm"],
  ["め", "dk"],
  ["も", "t"],
  ["ゃ", "dp"],
  ["や", "kp"],
  ["ゅ", "df"],
  ["ゆ", "dv"],
  ["ょ", "b"],
  ["よ", "kb"],
  ["ら", ":"],
  ["り", "y"],
  ["る", "n"],
  ["れ", "@"],
  ["ろ", "k;"],
  ["わ", "ka"],
  ["を", "dj"],
  ["ん", "j"],
];

const mizunaraCases: Cases = [
  ["、", ","],
  ["。", "."],
  ["ー", "sj"],
  ["ぁ", "le"],
  ["あ", "ka"],
  ["ぃ", "lw"],
  ["い", ";"],
  ["ぅ", "s."],
  ["う", "m"],
  ["ヴ", "s,"],
  ["ぇ", "lx"],
  ["え", "do"],
  ["ぉ", "dy"],
  ["お", "kf"],
  ["か", "a"],
  ["が", "x"],
  ["き", "h"],
  ["ぎ", "sh"],
  ["く", "n"],
  ["ぐ", "sn"],
  ["け", "ks"],
  ["げ", "lc"],
  ["こ", "z"],
  ["ご", "kq"],
  ["さ", "kg"],
  ["ざ", "lb"],
  ["し", "i"],
  ["じ", "dl"],
  ["す", "kd"],
  ["ず", "sp"],
  ["せ", "ls"],
  ["ぜ", "kc"],
  ["そ", "lg"],
  ["ぞ", "lt"],
  ["た", "v"],
  ["だ", "c"],
  ["ち", "dk"],
  ["ぢ", "s/"],
  ["っ", "u"],
  ["つ", "dj"],
  ["づ", "kw"],
  ["て", "r"],
  ["で", "t"],
  ["と", "o"],
  ["ど", "lr"],
  ["な", "f"],
  ["に", "w"],
  ["ぬ", "dn"],
  ["ね", "kv"],
  ["の", "p"],
  ["は", "e"],
  ["ば", "so"],
  ["ぱ", "su"],
  ["ひ", "dh"],
  ["び", "lz"],
  ["ぴ", "d/"],
  ["ふ", "lv"],
  ["ぶ", "di"],
  ["ぷ", "du"],
  ["へ", "kt"],
  ["べ", "lq"],
  ["ぺ", "d,"],
  ["ほ", "kr"],
  ["ぼ", "ke"],
  ["ぽ", "si"],
  ["ま", "d;"],
  ["み", "dm"],
  ["む", "sm"],
  ["め", "sk"],
  ["も", "q"],
  ["ゃ", "dp"],
  ["や", "kz"],
  ["ゅ", "d."],
  ["ゆ", "kx"],
  ["ょ", "b"],
  ["よ", "kb"],
  ["ら", "la"],
  ["り", "sl"],
  ["る", "g"],
  ["れ", "y"],
  ["ろ", "lf"],
  ["わ", "ld"],
  ["を", "s;"],
  ["ん", "j"],
];

const yukikaCases: Cases = [
  ["、", ","],
  ["。", "."],
  ["「", "d@"],
  ["」", "d:"],
  ["゛", "l"],
  ["゜", "/"],
  ["ー", ":"],
  ["ぁ", "kq"],
  ["あ", "di"],
  ["ぃ", "ka"],
  ["い", "i"],
  ["ぅ", "kz"],
  ["う", "m"],
  ["ぇ", "dp"],
  ["え", "d;"],
  ["ぉ", "d/"],
  ["お", "ks"],
  ["か", "f"],
  ["き", "v"],
  ["く", "n"],
  ["け", "r"],
  ["こ", "q"],
  ["さ", "b"],
  ["し", ";"],
  ["す", "z"],
  ["せ", "c"],
  ["そ", "kc"],
  ["た", "a"],
  ["ち", "dl"],
  ["っ", "h"],
  ["つ", "dj"],
  ["て", "s"],
  ["と", "e"],
  ["な", "w"],
  ["に", "do"],
  ["ぬ", "dy"],
  ["ね", "kw"],
  ["の", "o"],
  ["は", "g"],
  ["ひ", "d,"],
  ["ふ", "kg"],
  ["へ", "kb"],
  ["ほ", "kr"],
  ["ま", "dk"],
  ["み", "dn"],
  ["む", "y"],
  ["め", "@"],
  ["も", "kf"],
  ["ゃ", "dh"],
  ["や", "ke"],
  ["ゅ", "kx"],
  ["ゆ", "kt"],
  ["ょ", "x"],
  ["よ", "kv"],
  ["ら", "kd"],
  ["り", "dm"],
  ["る", "u"],
  ["れ", "p"],
  ["ろ", "t"],
  ["わ", "du"],
  ["を", "d."],
  ["ん", "j"],
];

const fumidukiCases: Cases = [
  ["、", ","],
  ["。", "."],
  ["ー", "/"],
  ["ぁ", "df"],
  ["あ", "kf"],
  ["ぃ", "ki"],
  ["い", "i"],
  ["ぅ", "kj"],
  ["う", "j"],
  ["ゔ", "sj"],
  ["ぇ", "k;"],
  ["え", "d;"],
  ["ぉ", "dg"],
  ["お", "kg"],
  ["か", "w"],
  ["が", ";"],
  ["き", "kd"],
  ["ぎ", "ld"],
  ["く", "h"],
  ["ぐ", "sh"],
  ["け", "kw"],
  ["げ", "lw"],
  ["こ", "dk"],
  ["ご", "sk"],
  ["さ", "ks"],
  ["ざ", "ls"],
  ["し", "e"],
  ["じ", "le"],
  ["す", "c"],
  ["ず", "lc"],
  ["せ", "x"],
  ["ぜ", "lx"],
  ["そ", "kr"],
  ["ぞ", "lr"],
  ["た", "f"],
  ["だ", "lf"],
  ["ち", "dm"],
  ["ぢ", "sm"],
  ["っ", "n"],
  ["つ", "y"],
  ["づ", "sy"],
  ["て", "r"],
  ["で", "b"],
  ["と", "g"],
  ["ど", "lg"],
  ["な", "v"],
  ["に", ":"],
  ["ぬ", "kx"],
  ["ね", "kc"],
  ["の", "o"],
  ["は", "a"],
  ["ば", "la"],
  ["ぱ", "sa"],
  ["ひ", "d,"],
  ["び", "s,"],
  ["ぴ", "l,"],
  ["ふ", "di"],
  ["ぶ", "si"],
  ["ぷ", "li"],
  ["へ", "dp"],
  ["べ", "sp"],
  ["ぺ", "lp"],
  ["ほ", "kv"],
  ["ぼ", "lv"],
  ["ぽ", "sv"],
  ["ま", "p"],
  ["み", "du"],
  ["む", "dn"],
  ["め", "ka"],
  ["も", "q"],
  ["や", "do"],
  ["ゆ", "dl"],
  ["ょ", "t"],
  ["よ", "z"],
  ["ら", "dj"],
  ["り", "dh"],
  ["る", "m"],
  ["れ", "ke"],
  ["ろ", "kt"],
  ["わ", "d."],
  ["を", "@"],
  ["ん", "u"],
];

const hidedukiCases: Cases = [
  ["・", "/"],
  ["、", ","],
  ["。", "."],
  ["ー", "p"],
  ["ぁ", "df"],
  ["あ", "kf"],
  ["ぃ", "ki"],
  ["い", "i"],
  ["ぅ", "kj"],
  ["う", "j"],
  ["ゔ", "lj"],
  ["ぇ", "dr"],
  ["え", "kr"],
  ["ぉ", "dw"],
  ["お", "kw"],
  ["か", "s"],
  ["ヵ", "ds"],
  ["が", "ls"],
  ["き", "w"],
  ["ぎ", "lw"],
  ["く", "h"],
  ["ぐ", "lh"],
  ["け", "kc"],
  ["ヶ", "dc"],
  ["げ", "lc"],
  ["こ", "x"],
  ["ご", "lx"],
  ["さ", "b"],
  ["ざ", "lb"],
  ["し", "e"],
  ["じ", "le"],
  ["す", "a"],
  ["ず", "la"],
  ["せ", "di"],
  ["ぜ", "li"],
  ["そ", "q"],
  ["ぞ", "lq"],
  ["た", "g"],
  ["だ", "lg"],
  ["ち", "z"],
  ["ぢ", "lz"],
  ["っ", "km"],
  ["つ", "dm"],
  ["づ", "lm"],
  ["て", "r"],
  ["で", "lr"],
  ["と", "f"],
  ["ど", "lf"],
  ["な", "v"],
  ["に", "c"],
  ["ぬ", "dp"],
  ["ね", "ka"],
  ["の", "n"],
  ["は", "t"],
  ["ば", "lt"],
  ["ぱ", "dt"],
  ["ひ", "dn"],
  ["び", "ln"],
  ["ぴ", "kn"],
  ["ふ", "du"],
  ["ぶ", "lu"],
  ["ぷ", "ku"],
  ["へ", "dy"],
  ["べ", "ly"],
  ["ぺ", "ky"],
  ["ほ", "kv"],
  ["ぼ", "lv"],
  ["ぽ", "dv"],
  ["ま", "dj"],
  ["み", "ke"],
  ["む", "kb"],
  ["め", "kt"],
  ["も", "dk"],
  ["ゃ", "kh"],
  ["や", "dh"],
  ["ゅ", "ko"],
  ["ゆ", "do"],
  ["ょ", "kl"],
  ["よ", "dl"],
  ["ら", "kd"],
  ["り", "m"],
  ["る", "o"],
  ["れ", "ks"],
  ["ろ", "kx"],
  ["ゎ", "dg"],
  ["わ", "kg"],
  ["ゐ", "kq"],
  ["ゑ", "kz"],
  ["を", "y"],
  ["ん", "u"],
];

// ゔ、ふ、わ はシフトと行段で打鍵数が同じ2つの打ち方があるので、
// 探索で優先される方だけ残しておいた
const hybridTsukiCases: Cases = [
  ["、", "d"],
  ["。", "k"],
  ["ぁ", "g/"],
  ["あ", "da"],
  ["ぃ", "g8"],
  ["い", "j"],
  ["ぅ", "gp"],
  ["う", "s"],
  // ["ゔ", "kr"],
  ["ゔ", "rp"],
  ["ゔぁ", "r/"],
  ["うぃ", "t8"],
  ["ゔぃ", "r8"],
  ["うぇ", "ty"],
  ["ゔぇ", "ry"],
  ["ゔぉ", "r:"],
  ["ぇ", "y"],
  ["え", "dd"],
  ["ぉ", "g:"],
  ["お", "h"],
  ["か", ";"],
  ["が", "g"],
  ["き", "kv"],
  ["ぎ", "kq"],
  ["きゃ", "v/"],
  ["ぎゃ", "q/"],
  ["きゅ", "vp"],
  ["ぎゅ", "qp"],
  ["きょ", "v:"],
  ["ぎょ", "q:"],
  ["く", "n"],
  ["ぐ", "kw"],
  ["け", "d;"],
  ["げ", "dg"],
  ["こ", "v"],
  ["ご", "dp"],
  ["さ", "af"],
  ["ざ", "aa"],
  ["し", "f"],
  ["じ", "aj"],
  ["じゃ", "a/"],
  ["じゅ", "ap"],
  ["じょ", "a:"],
  ["す", ","],
  ["ず", "as"],
  ["せ", "kf"],
  ["ぜ", "ad"],
  ["そ", "dl"],
  ["ぞ", "ah"],
  ["た", "e"],
  ["だ", "df"],
  ["ち", "ds"],
  ["ぢ", "d8"],
  ["ちゃ", "s/"],
  ["ぢゃ", "8/"],
  ["ちゅ", "sp"],
  ["ぢゅ", "8p"],
  ["ちょ", "s:"],
  ["ぢょ", "8:"],
  ["っ", "r"],
  ["つ", "kl"],
  ["づ", "k3"],
  ["て", "w"],
  ["で", "."],
  ["と", "l"],
  ["ど", "ak"],
  ["な", "i"],
  ["に", "u"],
  ["ぬ", "dm"],
  ["ね", "d,"],
  ["の", "o"],
  ["は", "z"],
  ["ば", "ka"],
  ["ぱ", "@"],
  ["ひ", "di"],
  ["び", "kj"],
  ["ぴ", "@j"],
  ["ひゃ", "i/"],
  ["びゃ", "k/"],
  ["ぴゃ", "@/"],
  ["ひゅ", "ip"],
  ["びゅ", "kp"],
  ["ぴゅ", "@p"],
  ["ひょ", "i:"],
  ["びょ", "k:"],
  ["ぴょ", "@:"],
  // ["ふ", "ke"],
  ["ふ", "ep"],
  ["ぶ", "ks"],
  ["ぷ", "@s"],
  ["ふぁ", "e/"],
  ["ふぃ", "e8"],
  ["ふぇ", "ey"],
  ["ふぉ", "e:"],
  ["へ", "ai"],
  ["べ", "kd"],
  ["ぺ", "@d"],
  ["ほ", "km"],
  ["ぼ", "kh"],
  ["ぽ", "@h"],
  ["ま", "q"],
  ["み", "do"],
  ["みゃ", "o/"],
  ["みゅ", "op"],
  ["みょ", "o:"],
  ["む", "kg"],
  ["め", "dv"],
  ["も", "x"],
  ["ゃ", "/"],
  ["や", "kk"],
  ["ゅ", "p"],
  ["ゆ", "ao"],
  ["ょ", ":"],
  ["よ", "dk"],
  ["ら", "b"],
  ["り", "dj"],
  ["りゃ", "j/"],
  ["りゅ", "jp"],
  ["りょ", "j:"],
  ["る", "c"],
  ["れ", "k;"],
  ["ろ", "a;"],
  // ["わ", "al"],
  ["わ", "t/"],
  ["を", "t"],
  ["ん", "m"],
];

const tukiringoCases: Cases = [
  ["、", "he"],
  ["。", "ge"],
  ["「", "["],
  ["」", "]"],
  ["゛", "i"],
  ["ー", "@"],
  ["ぁ", "qe"],
  ["あ", "je"],
  ["ぃ", "we"],
  ["い", "k"],
  ["ぅ", "@e"],
  ["う", "l"],
  ["ゔ", "li"],
  ["ぇ", "/e"],
  ["え", "le"],
  ["ぉ", "pe"],
  ["お", ","],
  ["か", "j"],
  ["が", "ji"],
  ["き", "\\"],
  ["ぎ", "\\i"],
  ["く", "g"],
  ["ぐ", "gi"],
  ["け", "re"],
  ["げ", "ri"],
  ["こ", "w"],
  ["ご", "wi"],
  ["さ", "t"],
  ["ざ", "ti"],
  ["し", "s"],
  ["じ", "si"],
  ["す", "u"],
  ["ず", "ui"],
  ["せ", "q"],
  ["ぜ", "qi"],
  ["そ", "ne"],
  ["ぞ", "ni"],
  ["た", "m"],
  ["だ", "mi"],
  ["ち", "z"],
  ["ぢ", "zi"],
  ["っ", ":"],
  ["つ", "/"],
  ["づ", "/i"],
  ["て", "d"],
  ["で", "di"],
  ["と", "f"],
  ["ど", "fi"],
  ["な", "n"],
  ["に", "c"],
  ["ぬ", "de"],
  ["ね", "ue"],
  ["の", "v"],
  ["は", "h"],
  ["ば", "hi"],
  ["ぱ", "ki"],
  ["ひ", "be"],
  ["び", "bi"],
  ["ぴ", "oi"],
  ["ふ", "ae"],
  ["ぶ", "ai"],
  ["ぷ", ":i"],
  ["へ", ";e"],
  ["べ", ";i"],
  ["ぺ", ".i"],
  ["ほ", "ye"],
  ["ぼ", "yi"],
  ["ぽ", "vi"],
  ["ま", "ke"],
  ["み", "oe"],
  ["む", ":e"],
  ["め", "."],
  ["も", "ve"],
  ["ゃ", "p"],
  ["や", "y"],
  ["ゅ", "b"],
  ["ゆ", ".e"],
  ["ょ", "e"],
  ["よ", "x"],
  ["ら", "r"],
  ["り", "fe"],
  ["る", ";"],
  ["れ", "a"],
  ["ろ", "te"],
  ["ゎ", "xe"],
  ["わ", ",e"],
  ["を", "me"],
  ["ん", "o"],
];

const cases = {
  "tsuki-2-263": tsukiCases,
  hana: hanaCases,
  buna: bunaCases,
  mizunara: mizunaraCases,
  yukika: yukikaCases,
  fumiduki: fumidukiCases,
  hideduki: hidedukiCases,
  hybridTsuki: hybridTsukiCases,
  tukiringo: tukiringoCases,
} satisfies Partial<Record<LayoutId, Cases>>;

describe(findShortestKeystrokes, () => {
  describe("月配列2-263式", () => {
    const table = getRomanTable("tsuki-2-263");
    test.each(cases["tsuki-2-263"])("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("花配列", () => {
    const table = getRomanTable("hana");
    test.each(cases.hana)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("ぶな配列", () => {
    const table = getRomanTable("buna");
    test.each(cases.buna)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("ミズナラ配列", () => {
    const table = getRomanTable("mizunara");
    test.each(cases.mizunara)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("幸花配列", () => {
    const table = getRomanTable("yukika");
    test.each(cases.yukika)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("文月配列", () => {
    const table = getRomanTable("fumiduki");
    test.each(cases.fumiduki)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("英月配列", () => {
    const table = getRomanTable("hideduki");
    test.each(cases.hideduki)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("ハイブリッド月配列", () => {
    const table = getRomanTable("hybridTsuki");
    test.each(cases.hybridTsuki)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });

  describe("月林檎配列", () => {
    const table = getRomanTable("tukiringo");
    test.each(cases.tukiringo)("%p -> %p", (kana, expected) => {
      expect(findShortestKeystrokes(table, kana)).toBe(expected);
    });
  });
});
